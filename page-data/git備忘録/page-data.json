{"componentChunkName":"component---src-templates-blog-post-js","path":"/git備忘録/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"f372c726-20a8-5600-80f9-580e4f431c67","excerpt":"初期設定 名前,メアド,UIの色,エディタの登録 登録した情報の確認 使い方 リポジトリ初期化 版管理の対象を登録 最初のコミット 変更の記録 変更点の確認 する前に、変更点を確認しよう コミットする gitのログメッセージを書く 一行目は変更点を…","html":"<h2>初期設定</h2>\n<h3>名前,メアド,UIの色,エディタの登録</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config --global user.name <span class=\"token string\">\"Yamada Hanako\"</span>\n<span class=\"token function\">git</span> config --global user.email <span class=\"token string\">\"yamahana@takaka.com\"</span>\n<span class=\"token function\">git</span> config --global color.ui auto\n<span class=\"token function\">git</span> config --global core.editor <span class=\"token string\">\"vim\"</span></code></pre></div>\n<h3>登録した情報の確認</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config -l</code></pre></div>\n<h2>使い方</h2>\n<h3>リポジトリ初期化</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> init</code></pre></div>\n<h3>版管理の対象を登録</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> index.html\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token comment\">#現在のディレクトリ以下全部を登録</span>\n<span class=\"token function\">git</span> ls-files\t\t<span class=\"token comment\"># git管理下のファイルを一覧表示</span></code></pre></div>\n<h3>最初のコミット</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"first commit\"</span></code></pre></div>\n<h3>変更の記録</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># index.htmlを適当に変更する</span>\n<span class=\"token function\">git</span> <span class=\"token function\">diff</span>\t<span class=\"token comment\">#最新コミットリクエストと現在のデータを比較</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> index.html\t<span class=\"token comment\">#最新コミットリクエストに現在のデータをリクエスト</span>\n<span class=\"token function\">git</span> <span class=\"token function\">diff</span>\t<span class=\"token comment\">#出力は空になる</span></code></pre></div>\n<h3>変更点の確認</h3>\n<p><code class=\"language-text\">git commit</code>する前に、変更点を確認しよう</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">diff</span> HEAD\t<span class=\"token comment\">#最新コミットと現在のデータを比較</span></code></pre></div>\n<h3>コミットする</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> -u\t<span class=\"token comment\">#gitで版管理しているすべてのファイルの現在の状態を次のコミットに記録させる</span>\n<span class=\"token function\">git</span> commit\t<span class=\"token comment\">#コミット</span></code></pre></div>\n<h3>gitのログメッセージを書く</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">日付表示\n\t\n各記事の前に日付をyyyy/mm/ddの形式で表示するようにした。\n<span class=\"token comment\"># Please enter the commit message for your changes. Lines starting</span>\n<span class=\"token comment\"># with '#' will be ignored, and an empty message aborts the commit.</span>\n<span class=\"token comment\"># On branch master</span>\n<span class=\"token comment\"># Changes to be committed:</span>\n<span class=\"token comment\">#\tmodified index.html</span>\n<span class=\"token comment\">#</span></code></pre></div>\n<p>一行目は変更点を1行に要約\n二行目は空行\n三行目に詳しい記述</p>\n<p>が鉄板らしい</p>\n<h3>怒られる</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Warning: commit message did not conform to UTF-8\nYou may want to amend it after fixing the message, or <span class=\"token builtin class-name\">set</span> the config\nvariable i18n.commitencoding to the encoding your pqoject uses.\n<span class=\"token punctuation\">[</span>master XXXXXX<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.文字化け<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span></code></pre></div>\n<h3>vimrcを直す</h3>\n<p>参考:<a href=\"https://qiita.com/takasianpride/items/0d68fcbbcc3aaf22cf9a\" title=\"Gitコミット時の文字化け(MacでVimによるコミット)\">Gitコミット時の文字化け(MacでVimによるコミット)</a>\n~/.vimrcに以下の内容を追加</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">encoding</span><span class=\"token operator\">=</span>utf8\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">fenc</span><span class=\"token operator\">=</span>utf-8</code></pre></div>\n<p>うまくいかない…</p>\n<p>参考:<a href=\"http://wadahiro.hatenablog.com/entry/20090506/1241622572\">Git コミットログの文字化けではまる</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\" <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">fileencodings</span><span class=\"token operator\">=</span>iso-2022.jp,euc-jp,utf-8,ucs-2,cp912,sjis\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">fileencoding</span><span class=\"token operator\">=</span>utf-8</code></pre></div>\n<p>fileencodingの候補が多すぎて勘違いされたらしい。\nUTF-8だけにしたら文字化け消えた。</p>\n<h3>git add -u と git commit をまとめてやる</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit -a</code></pre></div>\n<p>備考:<code class=\"language-text\">git add -u</code>はgit管理対象を全部インデックスに登録するコマンド</p>\n<h3>コミット履歴を見る</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> log\n<span class=\"token function\">git</span> log index.html\t<span class=\"token comment\">#特定のファイルの履歴を見る</span>\n<span class=\"token function\">git</span> log --oneline\t<span class=\"token comment\">#コミットIDと要約したコミットメッセージを1行で表示</span>\n<span class=\"token function\">git</span> log -3\t\t\t<span class=\"token comment\">#最新の3件のみ</span>\n<span class=\"token function\">git</span> log -p\t\t\t<span class=\"token comment\">#変更内容も表示</span></code></pre></div>\n<h2>テクニカルな使い方</h2>\n<h3>コミットのメモを書き直す</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit --amend</code></pre></div>\n<h3>ファイル内の行がどのコミットで生まれたものか表示</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> blame index.html</code></pre></div>\n<p>長いファイルだと、長い</p>\n<h3>過去のコミットの効果を打ち消す</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --hard <span class=\"token punctuation\">[</span>コミットID<span class=\"token punctuation\">]</span></code></pre></div>\n<p>commitIDは<code class=\"language-text\">git log --oneline</code>とかで出てくる黄色いハッシュ値\ncommitIDは最初の8文字でOK\nコミットオブジェクトをSHA-1でハッシュ化した160ビット(40文字の16進数)の値\nコミットオブジェクトはコミット内容の他に時刻やコミッターやメアドまで含まれるため、同じコミット内容でもハッシュ値は異なる</p>\n<p>これやったらマジで保存したやつ書き換えられた\n驚き</p>\n<h3>最後にコミットしたところまで戻る</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --hard HEAD</code></pre></div>\n<h2>参考</h2>\n<p>入門Git (秀和システム 2011)</p>\n<h2>経緯</h2>\n<p>いい加減gitの使い方くらい覚えないといけないのではないか\nまずひとりで版管理できてから、mergeとかbranchは学んでいこうと思った</p>","frontmatter":{"title":"git備忘録","date":"January 31, 2021","description":"忘れがちなgitのコマンドを多数収録ｖ"}},"previous":{"fields":{"slug":"/new-beginnings/"},"frontmatter":{"title":"New Beginnings"}},"next":null},"pageContext":{"id":"f372c726-20a8-5600-80f9-580e4f431c67","previousPostId":"f4811362-a30c-538d-83c7-b52f8db1d606","nextPostId":null}},"staticQueryHashes":["2841359383","916993862"]}