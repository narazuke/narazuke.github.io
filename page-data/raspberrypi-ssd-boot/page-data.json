{"componentChunkName":"component---src-templates-blog-post-js","path":"/raspberrypi-ssd-boot/","result":{"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"b7545dcb-cdcd-546a-b8b7-1e91ebf095fe","excerpt":"結論 Pros SD カードより SSD のほうが寿命が長い 書き込み性能が早い(約 2 倍) Cons USB ポートを１つ奪われる Youtube の受け売りです Stable Raspberry Pi 4 USB boot (HOW-TO) 注意 HDD でもできるらしいけど検証してない SSD や SD…","html":"<h2>結論</h2>\n<h3>Pros</h3>\n<ul>\n<li>SD カードより SSD のほうが寿命が長い</li>\n<li>書き込み性能が早い(約 2 倍)</li>\n</ul>\n<h3>Cons</h3>\n<ul>\n<li>USB ポートを１つ奪われる</li>\n</ul>\n<h2>Youtube の受け売りです</h2>\n<p><a href=\"https://www.youtube.com/watch?v=tUrX9wzhygc\" title=\"Stable Raspberry Pi 4 USB boot (HOW-TO)\">Stable Raspberry Pi 4 USB boot (HOW-TO)</a></p>\n<h2>注意</h2>\n<ul>\n<li>HDD でもできるらしいけど検証してない</li>\n<li>SSD や SD はフォーマットされます</li>\n</ul>\n<h2>SD カードで boot して update する</h2>\n<p><a href=\"https://www.raspberrypi.org/software/\" title=\"Raspberry Pi Imager\">Rasberry Pi Imager</a></p>\n<p><a href=\"https://downloads.raspberrypi.org/raspios_arm64/images/\" title=\"Index of /raspiod_arm64/images\">64bit beta 版</a></p>\n<p>64bit の最新版は 08-20 でした.(2020/12/05 現在)</p>\n<pre><code class=\"language-bash:title=bash\">sudo apt update\nsudo apt upgrade\nsudo rpi-update\nsudo reboot\n</code></pre>\n<p>rpi-update やろうとしたらエンジニア以外やるなって怒られた\nﾌﾝ...</p>\n<h2>firmware track の書き換え</h2>\n<pre><code class=\"language-bash:title=bash\">sudo nano /etc/default/rpi-eerom-upgate\n</code></pre>\n<p>critical を stable に書き換える</p>\n<pre><code class=\"language-:title=/etc/default/rpi-eerom-upgate\">FIRMWARE_RELEASE_STATUS=\"stable\"\n</code></pre>\n<p>nano の閉じ方\nctrl+x -> y -> Enter</p>\n<h2>bootloader のアップデート</h2>\n<pre><code class=\"language-bash:title=bash\">sudo rpi-eeprom-update -d -f /lib/firmware/raspberrypi/bootloader/stable/pieerom-hoge-ho-ge.bin\nsudo reboot\n</code></pre>\n<p>2020/12/05 時点では sep 3 が最新でした</p>\n<p>再起動後、<code>vcgencmd bootloader_version</code>で boot の日付が変わってたら成功</p>\n<h2>ssd に OS を書き込んで接続</h2>\n<h3>ssd の OS イメージ作成</h3>\n<p>もう一回 Raspberry Pi Imager を使う\nフォーマット後、OS に使う分だけ自動でパーティションしてくれるので便利</p>\n<h3>ssd のマウント</h3>\n<pre><code class=\"language-bash:title=bash\">sudo mkdir /mnt/hoge\nsudo mount /dev/sda1 /mnt/hoge\n</code></pre>\n<p>hoge はもちろんお好みの名前で\n差した外付けデバイスが 2 台目なら sdb になってるかも、早々ないと思うけど</p>\n<h3>必要なファイルをコピーする</h3>\n<pre><code class=\"language-bash:title=bash\">sudo cp /boot/*elf /mnt/hoge\nsudo cp /boot/*dat /mnt/hoge\n</code></pre>\n<p>お疲れ様です。終わりです</p>\n<h2>確認</h2>\n<h3>SD カードを抜いて再起動してみよう</h3>\n<p>立ち上がったね、いいね</p>\n<h3>速度を比較してみよう</h3>\n<p>参考:<a href=\"http://naoberry.com/tech/dd/\" title=\"ddコマンドでディスクの書き込み性能を簡易測定する\">dd コマンドでディスクの書き込み性能を簡易測定する</a></p>\n<pre><code class=\"language-bash:title=bash\">dd if=/dev/zero of=/tmp/write.tmp ibs=1M obs=1M count=1024\n</code></pre>\n<p>SD カード</p>\n<pre><code class=\"language-bash:title=bash\">1024+0 records in\n1024+0 records out\n1073741824 bytes (1.1 GB, 1.0 GiB) copied, 33.9586 s, 31.6 MB/s\n</code></pre>\n<p>SSD</p>\n<pre><code class=\"language-bash:title=bash\">1024+0 records in\n1024+0 records out\n1073741824 bytes (1.1 GB, 1.0 GiB) copied, 13.1027 s, 81.9 MB/s\n</code></pre>\n<p>(81.9/31.6)=2.59 倍早い</p>\n<h2>経緯</h2>\n<p>raspi 4B 買ったので新しいことに挑戦するなら今しかないと思ったためです</p>\n<p>Reposted from nozzlog, Written on 2020-12-05)</p>","fields":{"slug":"/raspberrypi-ssd-boot/"},"frontmatter":{"title":"SDカードなしでRaspberry Pi 4B を SSDでUSB bootする","created":"2021-03-18T11:03","updated":"2021-03-18T17:36","description":"SSDが余っててしょうがないあなたに...","tag":["raspberrypi"],"author":["nozzle"],"category":"tech"}},"previous":{"fields":{"slug":"/mac-backslash/"},"frontmatter":{"title":"Macでバックスラッシュを入力する"}},"next":{"fields":{"slug":"/wordpress-setting/"},"frontmatter":{"title":"WordPress設定備忘録"}},"relatedPosts":{"totalCount":7,"edges":[{"node":{"fields":{"slug":"/trouble-shooting-moduleerror-ndef/"},"frontmatter":{"title":"nfcpyの実験中\"ModuleNotFoundError No module named 'ndef'が出た"}}},{"node":{"fields":{"slug":"/raspberrypi-setting-memo/"},"frontmatter":{"title":"ラズパイ環境設定メモ"}}},{"node":{"fields":{"slug":"/wordpress-setting/"},"frontmatter":{"title":"WordPress設定備忘録"}}},{"node":{"fields":{"slug":"/raspberrypi-static-ipaddress/"},"frontmatter":{"title":"ラズパイのIPアドレスを固定する方法"}}},{"node":{"fields":{"slug":"/raspberrypi-ssd-boot/"},"frontmatter":{"title":"SDカードなしでRaspberry Pi 4B を SSDでUSB bootする"}}},{"node":{"fields":{"slug":"/raspberrypi-google-drive/"},"frontmatter":{"title":"ラズパイでGoogle Driveを使う"}}},{"node":{"fields":{"slug":"/pyenv-venv-virtual-environment/"},"frontmatter":{"title":"pyenvとvenvで仮想環境構築 ラズパイ編"}}}]}},"pageContext":{"id":"b7545dcb-cdcd-546a-b8b7-1e91ebf095fe","previousPostId":"c4e02773-30bd-5210-8263-93521f4f8b1e","nextPostId":"eb0018a5-854f-5c46-9ed4-b289d8b4f3a5","category":"tech","tagList":["raspberrypi"]}},"staticQueryHashes":["3284037645","500847697"]}