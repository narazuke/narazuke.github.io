{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/raspberrypi-ssd-boot/",
    "result": {"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"c144164f-2310-5cb4-9389-727a38f7ceb9","excerpt":"結論 Pros SD カードより SSD のほうが寿命が長い 書き込み性能が早い(約 2 倍) Cons USB ポートを１つ奪われる Youtube の受け売りです Stable Raspberry Pi 4 USB boot (HOW-TO) 注意 HDD でもできるらしいけど検証してない SSD や SD…","html":"<h2>結論</h2>\n<h3>Pros</h3>\n<ul>\n<li>SD カードより SSD のほうが寿命が長い</li>\n<li>書き込み性能が早い(約 2 倍)</li>\n</ul>\n<h3>Cons</h3>\n<ul>\n<li>USB ポートを１つ奪われる</li>\n</ul>\n<h2>Youtube の受け売りです</h2>\n<p><a href=\"https://www.youtube.com/watch?v=tUrX9wzhygc\" title=\"Stable Raspberry Pi 4 USB boot (HOW-TO)\">Stable Raspberry Pi 4 USB boot (HOW-TO)</a></p>\n<h2>注意</h2>\n<ul>\n<li>HDD でもできるらしいけど検証してない</li>\n<li>SSD や SD はフォーマットされます</li>\n</ul>\n<h2>SD カードで boot して update する</h2>\n<p><a href=\"https://www.raspberrypi.org/software/\" title=\"Raspberry Pi Imager\">Rasberry Pi Imager</a></p>\n<p><a href=\"https://downloads.raspberrypi.org/raspios_arm64/images/\" title=\"Index of /raspiod_arm64/images\">64bit beta 版</a></p>\n<p>64bit の最新版は 08-20 でした.(2020/12/05 現在)</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade\n<span class=\"token function\">sudo</span> rpi-update\n<span class=\"token function\">sudo</span> <span class=\"token function\">reboot</span></code></pre></div>\n<p>rpi-update やろうとしたらエンジニア以外やるなって怒られた\nﾌﾝ…</p>\n<h2>firmware track の書き換え</h2>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/default/rpi-eerom-upgate</code></pre></div>\n<p>critical を stable に書き換える</p>\n<div class=\"gatsby-highlight\" data-language=\":title=/etc/default/rpi-eerom-upgate\"><pre class=\"language-:title=/etc/default/rpi-eerom-upgate\"><code class=\"language-:title=/etc/default/rpi-eerom-upgate\">FIRMWARE_RELEASE_STATUS=&quot;stable&quot;</code></pre></div>\n<p>nano の閉じ方\nctrl+x -> y -> Enter</p>\n<h2>bootloader のアップデート</h2>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> rpi-eeprom-update -d -f /lib/firmware/raspberrypi/bootloader/stable/pieerom-hoge-ho-ge.bin\n<span class=\"token function\">sudo</span> <span class=\"token function\">reboot</span></code></pre></div>\n<p>2020/12/05 時点では sep 3 が最新でした</p>\n<p>再起動後、<code class=\"language-text\">vcgencmd bootloader_version</code>で boot の日付が変わってたら成功</p>\n<h2>ssd に OS を書き込んで接続</h2>\n<h3>ssd の OS イメージ作成</h3>\n<p>もう一回 Raspberry Pi Imager を使う\nフォーマット後、OS に使う分だけ自動でパーティションしてくれるので便利</p>\n<h3>ssd のマウント</h3>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> /mnt/hoge\n<span class=\"token function\">sudo</span> <span class=\"token function\">mount</span> /dev/sda1 /mnt/hoge</code></pre></div>\n<p>hoge はもちろんお好みの名前で\n差した外付けデバイスが 2 台目なら sdb になってるかも、早々ないと思うけど</p>\n<h3>必要なファイルをコピーする</h3>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /boot/*elf /mnt/hoge\n<span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /boot/*dat /mnt/hoge</code></pre></div>\n<p>お疲れ様です。終わりです</p>\n<h2>確認</h2>\n<h3>SD カードを抜いて再起動してみよう</h3>\n<p>立ち上がったね、いいね</p>\n<h3>速度を比較してみよう</h3>\n<p>参考:<a href=\"http://naoberry.com/tech/dd/\" title=\"ddコマンドでディスクの書き込み性能を簡易測定する\">dd コマンドでディスクの書き込み性能を簡易測定する</a></p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">dd</span> <span class=\"token assign-left variable\">if</span><span class=\"token operator\">=</span>/dev/zero <span class=\"token assign-left variable\">of</span><span class=\"token operator\">=</span>/tmp/write.tmp <span class=\"token assign-left variable\">ibs</span><span class=\"token operator\">=</span>1M <span class=\"token assign-left variable\">obs</span><span class=\"token operator\">=</span>1M <span class=\"token assign-left variable\">count</span><span class=\"token operator\">=</span><span class=\"token number\">1024</span></code></pre></div>\n<p>SD カード</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">1024</span>+0 records <span class=\"token keyword\">in</span>\n<span class=\"token number\">1024</span>+0 records out\n<span class=\"token number\">1073741824</span> bytes <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span> GB, <span class=\"token number\">1.0</span> GiB<span class=\"token punctuation\">)</span> copied, <span class=\"token number\">33.9586</span> s, <span class=\"token number\">31.6</span> MB/s</code></pre></div>\n<p>SSD</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">1024</span>+0 records <span class=\"token keyword\">in</span>\n<span class=\"token number\">1024</span>+0 records out\n<span class=\"token number\">1073741824</span> bytes <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span> GB, <span class=\"token number\">1.0</span> GiB<span class=\"token punctuation\">)</span> copied, <span class=\"token number\">13.1027</span> s, <span class=\"token number\">81.9</span> MB/s</code></pre></div>\n<p>(81.9/31.6)=2.59 倍早い</p>\n<h2>経緯</h2>\n<p>raspi 4B 買ったので新しいことに挑戦するなら今しかないと思ったためです</p>\n<p>Reposted from nozzlog, Written on 2020-12-05)</p>","fields":{"slug":"/raspberrypi-ssd-boot/"},"frontmatter":{"title":"SDカードなしでRaspberry Pi 4B を SSDでUSB bootする","created":"2021-03-18T11:03","updated":"2021-03-18T17:36","description":"SSDが余っててしょうがないあなたに...","tag":["raspberrypi"],"author":["nozzle"],"category":"tech"}},"previous":{"fields":{"slug":"/mac-backslash/"},"frontmatter":{"title":"Macでバックスラッシュを入力する"}},"next":{"fields":{"slug":"/game-streaming-impression/"},"frontmatter":{"title":"ゲーム配信所感"}},"relatedPosts":{"totalCount":7,"edges":[{"node":{"fields":{"slug":"/raspberrypi-setting-memo/"},"frontmatter":{"title":"ラズパイ環境設定メモ"}}},{"node":{"fields":{"slug":"/trouble-shooting-moduleerror-ndef/"},"frontmatter":{"title":"nfcpyの実験中\"ModuleNotFoundError No module named 'ndef'が出た"}}},{"node":{"fields":{"slug":"/raspberrypi-static-ipaddress/"},"frontmatter":{"title":"ラズパイのIPアドレスを固定する方法"}}},{"node":{"fields":{"slug":"/wordpress-setting/"},"frontmatter":{"title":"WordPress設定備忘録"}}},{"node":{"fields":{"slug":"/raspberrypi-ssd-boot/"},"frontmatter":{"title":"SDカードなしでRaspberry Pi 4B を SSDでUSB bootする"}}},{"node":{"fields":{"slug":"/raspberrypi-google-drive/"},"frontmatter":{"title":"ラズパイでGoogle Driveを使う"}}},{"node":{"fields":{"slug":"/pyenv-venv-virtual-environment/"},"frontmatter":{"title":"pyenvとvenvで仮想環境構築 ラズパイ編"}}}]}},"pageContext":{"id":"c144164f-2310-5cb4-9389-727a38f7ceb9","previousPostId":"6c56a911-88e1-5145-81d4-eed879788168","nextPostId":"06cb2f25-001c-559b-9368-1542cad342a7","category":"tech","tagList":["raspberrypi"]}},
    "staticQueryHashes": ["3284037645","500847697"]}