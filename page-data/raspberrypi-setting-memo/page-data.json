{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/raspberrypi-setting-memo/",
    "result": {"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"355589b1-750e-5f1c-8643-685606b7a8de","excerpt":"OS 再インストール ラズパイ再起動して Shift Raspbian チェックしてインストールを押す。 アップグレード これは流石に忘れないか。 (2021-03-18 追記)\n忘れてました pi のユーザ名変更 [Raspbian…","html":"<h2>OS 再インストール</h2>\n<p>ラズパイ再起動して Shift<br>\nRaspbian チェックしてインストールを押す。</p>\n<h2>アップグレード</h2>\n<p>これは流石に忘れないか。<br>\n(2021-03-18 追記)\n忘れてました</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> autoremove</code></pre></div>\n<h2>pi のユーザ名変更</h2>\n<p><a href=\"https://jyn.jp/raspberrypi-username-change/\">[Raspbian]ユーザ名変更の個人的に「正しい」と思うやり方</a></p>\n<p>後学のためなにをやってるかメモ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash=title=bash\"><pre class=\"language-bash=title=bash\"><code class=\"language-bash=title=bash\"># pi でログイン\n\nsudo useradd -M tmp # 新規ユーザ tmp を生成 -M でユーザディレクトリなし\nsudo gpasswd -a tmp sudo # tmp で sudo が使えるようにする -a は add で追加を指す\nsudo passwd tmp\ngetent passwd # 新規ユーザ tmp がいるか確認してみよう\nid tmp # tmp が所属するグループに 27(sudo)があるか確認してみよう\n\n# tmp でログイン\n\nsudo usermod -l newpi pi # usermod -l 新名 旧名 のユーザ名変更\nsudo usermod -d /home/newpi -m newpi # usermod -d でホームディレクトリを/home/pi から/home/newpi に変更 -m はデータ移行\nsudo groupmod -n newpi pi 　# groupmod -n で pi グループを newpi グループに変更\n\n#newpi でログイン\nsudo userdel tmp # ユーザ tmp の削除 自分の環境では警告はなし\nsudo mv /etc/sudoers.d/010_pi-nopasswd 010_pi-nopasswd.bak #pi に sudo 権限を与えるファイルを無効</code></pre></div>\n<p><code class=\"language-text\">sudo gpasswd -a tmp sudo</code> の代わりに <code class=\"language-text\">sudo usermod -aG sudo tmp</code> も使える。<code class=\"language-text\">sudo usermod -l </code>新名 旧名は mv と順番が逆でややこしい。</p>\n<h2>raspberrypi のホスト名変更</h2>\n<p>sudo raspi-config</p>\n<p>2 Network Options → N1 Hostname から変更する</p>\n<h2>vim</h2>\n<p>sudo apt install vim</p>\n<p>Molokai にして先人の良い vimrc をコピペしよう。</p>\n<p><a href=\"http://pyoonn.hatenablog.com/entry/2014/10/04/225321\">Vim のカラースキームを Molokai に変更する</a></p>\n<p><a href=\"https://blog.goo.ne.jp/tunekawa/e/73faa8bc50506cdab4b31fa15fa82547\">vi で矢印キーを禁止する</a></p>\n<h2>SSH 初期設定</h2>\n<p>「メニュー」＞「設定」＞「Raspberry Pi の設定」 から SSH を有効にする。</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ifconfig</span> <span class=\"token comment\"># 192.168.1.XXX を記憶</span></code></pre></div>\n<p>他の端末から SSH できるか確認する。</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#他端末のターミナルで操作</span>\n<span class=\"token function\">ssh</span> newpi@192.168.1.XXX <span class=\"token comment\"># パスワードを入力</span>\n<span class=\"token builtin class-name\">exit</span>\nssh-copy-id newpi@192.168.1.XXX <span class=\"token comment\"># 公開鍵を authorized_key に登録</span>\n<span class=\"token function\">ssh</span> newpi@192.168.1.XXX <span class=\"token comment\"># パスワードなしで ssh できたら成功</span></code></pre></div>\n<h2>sshd_config の変更</h2>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/ssh/sshd_config</code></pre></div>\n<h3>root からの SSH を禁止</h3>\n<div class=\"gatsby-code-title\">/etc/ssh/sshd_config</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">PermitRootLogin no</code></pre></div>\n<h3>パスワード認証を禁止</h3>\n<div class=\"gatsby-code-title\">/etc/ssh/sshd_config</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">PasswordAuthentication no</code></pre></div>\n<h3>ポート番号の変更</h3>\n<div class=\"gatsby-code-title\">/etc/ssh/sshd_config</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Port XXXXX</code></pre></div>\n<p>新規ポート番号は 49152 から 65535 の好きな番号にしよう。 65712 は使えない。</p>\n<p>最後に<code class=\"language-text\">sudo systemctl restart ssh </code>で ssh を再起動する</p>\n<h2>ターミナルを英語で運用</h2>\n<h3>en_US.utf8 を locale に入れる</h3>\n<p><a href=\"https://toxweblog.toxbe.com/2018/09/28/tmux-invalid-lang/\">tmux で invalid LC_ALL, LC_CTYPE or LANG となる</a></p>\n<p>このサイト通りに設定したらできた。<br>\nラズパイなら raspi-config → 4 Localisatation Option → I1 Change Locale から同様の設定ができる。</p>\n<h3>.bashrc の設定</h3>\n<div class=\"gatsby-code-title\">/home/user/.bashrc</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">LANG</span></span><span class=\"token operator\">=</span>en_US.utf8</code></pre></div>\n<p>ついでに# some more ls aliases の下の#を消して ll できるようにしておこう。</p>\n<h3>日本語ディレクトリを変更</h3>\n<p><a href=\"https://blog.1q77.com/2013/06/xdg-user-dirs-update/\">デスクトップディレクトリを英語に変更</a></p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\"><span class=\"token environment constant\">LANG</span></span><span class=\"token operator\">=</span>C xdg-user-dirs-update --force</code></pre></div>\n<p>日本語ディレクトリが文字化けして残る。ラズパイの GUI で直接消そう。</p>\n<h2>tmux</h2>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> tmux\ntmux</code></pre></div>\n<p>tmux は画面分割が便利。Ctrl+ B のあとに Shift + 2 を押すと縦分割ができる。<br>\nCtrl + B のあとに Shift + 5 を押すと横分割ができる。</p>\n<p>早速横分割にして罫線がおかしいときは下のリンクを見よう</p>\n<p><a href=\"http://ptan.info/archives/384\">PuTTY で tmux を使うと分割表示したときの罫線がおかしい</a></p>\n<h2>まとめ</h2>\n<p>ラズパイからキーボードを取っ払って、机をひろく使おう。</p>\n<p>(Reposted from nozzlog, Written on 2020-02-25)</p>","fields":{"slug":"/raspberrypi-setting-memo/"},"frontmatter":{"title":"ラズパイ環境設定メモ","created":"2021-03-18T16:45","updated":"2021-03-18T18:57","description":"ラズパイ3B+買ったときのメモでした","tag":["raspberrypi","memo"],"author":["nozzle"],"category":"tech"}},"previous":{"fields":{"slug":"/trouble-shooting-moduleerror-ndef/"},"frontmatter":{"title":"nfcpyの実験中\"ModuleNotFoundError No module named 'ndef'が出た"}},"next":{"fields":{"slug":"/kon20210319/"},"frontmatter":{"title":"日記"}},"relatedPosts":{"totalCount":14,"edges":[{"node":{"fields":{"slug":"/trouble-shooting-moduleerror-ndef/"},"frontmatter":{"title":"nfcpyの実験中\"ModuleNotFoundError No module named 'ndef'が出た"}}},{"node":{"fields":{"slug":"/raspberrypi-setting-memo/"},"frontmatter":{"title":"ラズパイ環境設定メモ"}}},{"node":{"fields":{"slug":"/wordpress-setting/"},"frontmatter":{"title":"WordPress設定備忘録"}}},{"node":{"fields":{"slug":"/raspberrypi-static-ipaddress/"},"frontmatter":{"title":"ラズパイのIPアドレスを固定する方法"}}},{"node":{"fields":{"slug":"/raspberrypi-ssd-boot/"},"frontmatter":{"title":"SDカードなしでRaspberry Pi 4B を SSDでUSB bootする"}}},{"node":{"fields":{"slug":"/mac-backslash/"},"frontmatter":{"title":"Macでバックスラッシュを入力する"}}},{"node":{"fields":{"slug":"/raspberrypi-google-drive/"},"frontmatter":{"title":"ラズパイでGoogle Driveを使う"}}},{"node":{"fields":{"slug":"/mac-setting-memo/"},"frontmatter":{"title":"M1 Mac環境構築メモ"}}},{"node":{"fields":{"slug":"/gitclone-to-mygithub/"},"frontmatter":{"title":"gitで別のリポジトリからファイルをコピーする"}}},{"node":{"fields":{"slug":"/chinese/"},"frontmatter":{"title":"中国語メモ"}}},{"node":{"fields":{"slug":"/arknights-auto/"},"frontmatter":{"title":"アークナイツ周回の自動化(Mac,C++)"}}},{"node":{"fields":{"slug":"/pyenv-venv-virtual-environment/"},"frontmatter":{"title":"pyenvとvenvで仮想環境構築 ラズパイ編"}}},{"node":{"fields":{"slug":"/vim-command/"},"frontmatter":{"title":"Vimのコマンド"}}},{"node":{"fields":{"slug":"/arknights-recruit/"},"frontmatter":{"title":"アークナイツの公開求人"}}}]}},"pageContext":{"id":"355589b1-750e-5f1c-8643-685606b7a8de","previousPostId":"e58d2115-a100-5a48-bcad-a472cf27ceb2","nextPostId":"c2fbfc11-6c21-515e-af62-07cc79535cfe","category":"tech","tagList":["raspberrypi","memo"]}},
    "staticQueryHashes": ["3284037645","500847697"]}