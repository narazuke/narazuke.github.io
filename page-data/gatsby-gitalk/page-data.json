{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-gitalk/","result":{"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"12467c30-2f0e-5db5-88c3-ec6ea65115f4","excerpt":"Gitalk とは Gitalk is a modern comment component based on GitHub Issue and Preact. 引用元：Gitalk | Github Github の issue…","html":"<h3>Gitalk とは</h3>\n<blockquote>\n<p>Gitalk is a modern comment component based on GitHub Issue and Preact.</p>\n</blockquote>\n<p>引用元：<a href=\"https://github.com/gitalk/gitalk\">Gitalk | Github</a></p>\n<p>Github の issue を利用するコメントのコンポーネントである。\n導入することで静的なサイトでもコメント欄が設置できる。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/736e4a08f0afdfd253781f12170fa469/b0abb/gitalk_01.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd1RAX//xAAXEAADAQAAAAAAAAAAAAAAAAAAAREg/9oACAEBAAEFAh3P/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAACAhMf/aAAgBAQAGPwLSL//EABgQAAIDAAAAAAAAAAAAAAAAAAABIDFh/9oACAEBAAE/IaDaCh//2gAMAwEAAgADAAAAELzP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMAAwAAAAAAAAAAAAAAAQARMRAhUf/aAAgBAQABPxAcNu3SACh7tqYjz//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 01\"\n        title=\"gitalk 01\"\n        src=\"/static/736e4a08f0afdfd253781f12170fa469/828fb/gitalk_01.jpg\"\n        srcset=\"/static/736e4a08f0afdfd253781f12170fa469/ff44c/gitalk_01.jpg 158w,\n/static/736e4a08f0afdfd253781f12170fa469/a6688/gitalk_01.jpg 315w,\n/static/736e4a08f0afdfd253781f12170fa469/828fb/gitalk_01.jpg 630w,\n/static/736e4a08f0afdfd253781f12170fa469/b0abb/gitalk_01.jpg 717w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>gatsby の記事に設置された Gitalk のコメント</em></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8cf1b43e4504ce68587071d7485fed7a/b54c8/gitalk_02.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.51898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHu6FCZf//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAACAh/9oACAEBAAY/Aqv/xAAZEAACAwEAAAAAAAAAAAAAAAAQIQABQWH/2gAIAQEAAT8hrhhTT//aAAwDAQACAAMAAAAQF8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAADAQEBAQAAAAAAAAAAAAAAAREhYUGB/9oACAEBAAE/EFcwXFhF0jeP6K0abw//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 02\"\n        title=\"gitalk 02\"\n        src=\"/static/8cf1b43e4504ce68587071d7485fed7a/828fb/gitalk_02.jpg\"\n        srcset=\"/static/8cf1b43e4504ce68587071d7485fed7a/ff44c/gitalk_02.jpg 158w,\n/static/8cf1b43e4504ce68587071d7485fed7a/a6688/gitalk_02.jpg 315w,\n/static/8cf1b43e4504ce68587071d7485fed7a/828fb/gitalk_02.jpg 630w,\n/static/8cf1b43e4504ce68587071d7485fed7a/b54c8/gitalk_02.jpg 879w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>Github の issue 上のコメント</em></p>\n<p>Gitalk は Github Application を介して、ブログポストごとに新たな issue を立て、ログインしたアカウントでその issue へ返信することができる。<br>\nGitalk 一連の issue の返信をブログポストへのコメントとして表示する。</p>\n<h3>Gitalk の特徴</h3>\n<ul>\n<li>サーバーレスで軽い</li>\n<li>コメントを Github の issue で管理できる</li>\n<li>Github のアカウントがないとコメントできない</li>\n</ul>\n<p>Github のアカウント必須はデメリットに思えるかもしれないが、自分はメリットだと考えている。<br>\n<strong>理由：Github のアカウントを持っている人は IT リテラシーが高いため。</strong></p>\n<h2>Gatsby に Gitalk を導入</h2>\n<p>画像を見て理解してほしい。</p>\n<h3>Github のプロフィールから settings へ</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54587efbafb800ffa4f1b019d3173603/961c1/gitalk_03.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1rPgUME//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAITAyD/2gAIAQEAAQUCihHImnH/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAACkQAgMzL/2gAIAQEABj8CzFTMVOBVP//EABkQAAIDAQAAAAAAAAAAAAAAAAERABAxwf/aAAgBAQABPyENLpAC+SHKU//aAAwDAQACAAMAAAAQkx//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERQVGB8P/aAAgBAQABPxCmhyIPmeovCj6wSBJQht1af//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 03\"\n        title=\"gitalk 03\"\n        src=\"/static/54587efbafb800ffa4f1b019d3173603/828fb/gitalk_03.jpg\"\n        srcset=\"/static/54587efbafb800ffa4f1b019d3173603/ff44c/gitalk_03.jpg 158w,\n/static/54587efbafb800ffa4f1b019d3173603/a6688/gitalk_03.jpg 315w,\n/static/54587efbafb800ffa4f1b019d3173603/828fb/gitalk_03.jpg 630w,\n/static/54587efbafb800ffa4f1b019d3173603/0ede0/gitalk_03.jpg 945w,\n/static/54587efbafb800ffa4f1b019d3173603/961c1/gitalk_03.jpg 1190w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Developer settings を開く</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6d627c9ae560616dd759a259501b280d/1c7bc/gitalk_04.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.44303797468356%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe9ZSNDNCg//xAAWEAADAAAAAAAAAAAAAAAAAAABECD/2gAIAQEAAQUCQv8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQESAhMf/aAAgBAQABPyEs2XKwU//aAAwDAQACAAMAAAAQAAgA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBAAAgICAwAAAAAAAAAAAAAAAAEQMSGBEVFh/9oACAEBAAE/EKWOyg2Ru3onytiimxXH/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 04\"\n        title=\"gitalk 04\"\n        src=\"/static/6d627c9ae560616dd759a259501b280d/828fb/gitalk_04.jpg\"\n        srcset=\"/static/6d627c9ae560616dd759a259501b280d/ff44c/gitalk_04.jpg 158w,\n/static/6d627c9ae560616dd759a259501b280d/a6688/gitalk_04.jpg 315w,\n/static/6d627c9ae560616dd759a259501b280d/828fb/gitalk_04.jpg 630w,\n/static/6d627c9ae560616dd759a259501b280d/0ede0/gitalk_04.jpg 945w,\n/static/6d627c9ae560616dd759a259501b280d/1c7bc/gitalk_04.jpg 1023w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>OAuth Apps を選んで、Register a new application を選択</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e376989c55f7caacf766b6455376384/09a37/gitalk_05.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.58227848101266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB35Cgf//EABYQAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAQABBQJtf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQMf/aAAgBAQAGPwIq/8QAGRAAAQUAAAAAAAAAAAAAAAAAAQAQEVFx/9oACAEBAAE/IQEaUY3/2gAMAwEAAgADAAAAEAPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAMRBBkf/aAAgBAQABPxBAtwFIG4t14//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 05\"\n        title=\"gitalk 05\"\n        src=\"/static/9e376989c55f7caacf766b6455376384/828fb/gitalk_05.jpg\"\n        srcset=\"/static/9e376989c55f7caacf766b6455376384/ff44c/gitalk_05.jpg 158w,\n/static/9e376989c55f7caacf766b6455376384/a6688/gitalk_05.jpg 315w,\n/static/9e376989c55f7caacf766b6455376384/828fb/gitalk_05.jpg 630w,\n/static/9e376989c55f7caacf766b6455376384/0ede0/gitalk_05.jpg 945w,\n/static/9e376989c55f7caacf766b6455376384/09a37/gitalk_05.jpg 989w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>必要な情報を入力する</h3>\n<p>Application name: なんでもいい<br>\nHomepage URL: ブログの URL<br>\nAuthorization callback URL: ブログの URL(上と同じ)\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b5798c2082ed78f0958deb58fdbcc59/fd3c9/gitalk_06.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.81012658227847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7ts9ElBQAP/EABcQAAMBAAAAAAAAAAAAAAAAAAEQEiD/2gAIAQEAAQUCdCs//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFhABAQEAAAAAAAAAAAAAAAAAERAg/9oACAEBAAY/AqOv/8QAGRAAAgMBAAAAAAAAAAAAAAAAAUEAEBEg/9oACAEBAAE/IWYKSN6//9oADAMBAAIAAwAAABCEzzz/xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPxBj/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBABAAIBBQAAAAAAAAAAAAAAAQARIRAgMUFR/9oACAEBAAE/EMVJAHGljGXVdwXx2//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 06\"\n        title=\"gitalk 06\"\n        src=\"/static/2b5798c2082ed78f0958deb58fdbcc59/828fb/gitalk_06.jpg\"\n        srcset=\"/static/2b5798c2082ed78f0958deb58fdbcc59/ff44c/gitalk_06.jpg 158w,\n/static/2b5798c2082ed78f0958deb58fdbcc59/a6688/gitalk_06.jpg 315w,\n/static/2b5798c2082ed78f0958deb58fdbcc59/828fb/gitalk_06.jpg 630w,\n/static/2b5798c2082ed78f0958deb58fdbcc59/fd3c9/gitalk_06.jpg 693w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>client ID と Client secret を入手する</h3>\n<p>Generate a new client secret を押して Client secret を発行する。\n後で使うのでこのページを残しておくこと。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f707feb9b182897c30ccc399d7ce9515/0ed67/gitalk_07.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.9746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7emcpZBYElgf/8QAGxAAAgEFAAAAAAAAAAAAAAAAAREAAhASICH/2gAIAQEAAQUCpBF2pk53T//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABcQAAMBAAAAAAAAAAAAAAAAAAIgIRH/2gAIAQEABj8CpakX/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQETGhsf/aAAgBAQABPyGy0ahFcuiAmHP/2gAMAwEAAgADAAAAELfIg//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAEDAQE/EGP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMZFh/9oACAEBAAE/EDLFmyxTyKg4exKbFvJfLgLFFPsQbUAOEOw5P//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 07\"\n        title=\"gitalk 07\"\n        src=\"/static/f707feb9b182897c30ccc399d7ce9515/828fb/gitalk_07.jpg\"\n        srcset=\"/static/f707feb9b182897c30ccc399d7ce9515/ff44c/gitalk_07.jpg 158w,\n/static/f707feb9b182897c30ccc399d7ce9515/a6688/gitalk_07.jpg 315w,\n/static/f707feb9b182897c30ccc399d7ce9515/828fb/gitalk_07.jpg 630w,\n/static/f707feb9b182897c30ccc399d7ce9515/0ed67/gitalk_07.jpg 769w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Github Application を準備する</h3>\n<h3>Gatsby 用のプラグインをいれる</h3>\n<p><a href=\"https://github.com/suziwen/gatsby-plugin-gitalk\">Gatsby Plugin Gitalk | Github</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> gatsby-plugin-gitalk</code></pre></div>\n<h3>gatsby-config.js に追記する</h3>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 他の設定</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-plugin-gitalk\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          clientID<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>生成したアプリケーションの<span class=\"token constant\">ID</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          clientSecret<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>生成したアプリケーションのsecretClient<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          repo<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>レポジトリ名<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          owner<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>レポジトリのオーナー<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          admin<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>レポジトリのオーナー<span class=\"token punctuation\">,</span> レポジトリが組織のものならそのメンバー<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          pagerDirection<span class=\"token operator\">:</span> <span class=\"token string\">\"first\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// コメントが古い順になる</span>\n          createIssueManually<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          distractionFreeMode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// コメント欄にフォーカスした時周囲が暗くならないようにする</span>\n          enableHotKey<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ctrl+Enterで送信できるようにする</span>\n          proxy<span class=\"token operator\">:</span> <span class=\"token string\">\"https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>clientID と clientSecret は\"\"で囲む。e.g. <code class=\"language-text\">&quot;daa548c3047c9a99d442&quot;</code><br>\nrepo はレポジトリ名だけでいい。 e.g. <code class=\"language-text\">repo: &quot;narazuke.github.io&quot;</code></p>\n<h3>blog-post.js に追記する</h3>\n<div class=\"gatsby-code-title\">src/templetes/gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"@suziwen/gitalk/dist/gitalk.css\"</span>\n<span class=\"token keyword\">import</span> Gitalk <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-plugin-gitalk\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BlogPostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>markdownRemark\n<span class=\"token keyword\">let</span> gitalkConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span>Gitalk options<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>gitalkConfig<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span></code></pre></div>\n<p>参考：<a href=\"https://blog.logrocket.com/4-plugins-to-add-comments-to-your-gatsbyjs-blog/\">4 plugins to add comments to your Gatsby.js blog</a></p>\n<h3>おわり？</h3>\n<p>公式の説明だとこれでできるようになるはずだが、2021 年 2 月時点でこの設定だけでは Gitalk が使用できない。次のトラブルシュートを参照してほしい。</p>\n<h2>トラブルシュート：ログインすると、Error: Request failed with status code 403 と出てしまう</h2>\n<h3>原因</h3>\n<p><code class=\"language-text\">cors-anywhere.herokuapp.com</code> の利用に 2021 年 1 月末から制約が生まれたため、Gitalk の処理、<code class=\"language-text\">https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token</code>が動いていないから。</p>\n<p>参考：<a href=\"https://github.com/gitalk/gitalk/issues/429\">在授权 gitalk 后出现 403 错误</a><br>\n参考：<a href=\"https://github.com/Rob--W/cors-anywhere/issues/301\">PSA: Public demo server (cors-anywhere.herokuapp.com) will be very limited by January 2021, 31st</a></p>\n<h3>解説</h3>\n<p>正直あまり分かっていない。現時点での理解を書き留める。<br>\nあるサイトから別のサイトの情報を利用することを crosssite origin resource share と呼び、略して CORS と言う。<br>\nなんでもかんでも別のサイトから利用されては悪用されるリスクがあるので、通常は CORS が制限されている。CORS するにはアクセストークンで 2 つのサイトを紐付ける必要がある。<br>\ncors-anywhere があれば、どのサイトへどこからでも CORS で入手できる。すごい<br>\nこれを使っている cors-anywhere.herokuapp.com は親切な人が動かしてくれてる heroku のアプリで、誰でも無料で使うことができたが、悪用される恐れからこれの利用にも制限がかかった。2021 年 1 月末以降、利用には WEB で一時的に利用制限を解く処理をしなければならなくなった。<br>\nGitalk は 2021 年 2 月現在特にこの事態に対する処理を追加していないため、Gitalk が使えなくなってしまっている人が出ている。</p>\n<h3>対処法</h3>\n<p>cors-anywhere ができる herokuapp.com を自分で用意する。</p>\n<h3>手順</h3>\n<p>heroku のアカウントを作る。\n<a href=\"heroku.com\">Heroku</a><br>\nheroku コマンドを CLI で使えるようにする。\n<a href=\"https://devcenter.heroku.com/articles/heroku-cli\">The Heroku CLI</a><br>\nCLI で heroku にログインする。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">heroku login</code></pre></div>\n<p>ポップアップを開いてメアドとパスワード打って戻ると、CLI でのログインに成功しているはず。</p>\n<p>heroku app を動かす。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone https://github.com/Rob--W/cors-anywhere.git\n<span class=\"token builtin class-name\">cd</span> cors-anywhere/\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span>\nheroku create\n<span class=\"token function\">git</span> push heroku master</code></pre></div>\n<p>参考：<a href=\"https://stackoverflow.com/questions/47076743/cors-anywhere-herokuapp-com-not-working-503-what-else-can-i-try\">cors-anywhere.herokuapp.com not working (503). What else can I try? | stack overflow</a></p>\n<p>heroku にブラウザでログインする。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/85e5c4a3daef7f787f11230a2c3d798a/a847c/gitalk_08.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAQP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABfxzrU0pB/8QAGxAAAQQDAAAAAAAAAAAAAAAAAAIDBBEQJDH/2gAIAQEAAQUCt8uQbInuP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/Aar/xAAXEAADAQAAAAAAAAAAAAAAAAAAATEQ/9oACAEBAAY/AoiIiHv/xAAbEAABBAMAAAAAAAAAAAAAAAAAAREgoUFR8f/aAAgBAQABPyHAlBpqH4ob/9oADAMBAAIAAwAAABB/P//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EKr/xAAVEQEBAAAAAAAAAAAAAAAAAAAAcf/aAAgBAgEBPxCUv//EAB0QAAIBBAMAAAAAAAAAAAAAAAAB0RARIcFBcfD/2gAIAQEAAT8Qv5S3Gexp0pDdFM8O6M//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitalk 08\"\n        title=\"gitalk 08\"\n        src=\"/static/85e5c4a3daef7f787f11230a2c3d798a/828fb/gitalk_08.jpg\"\n        srcset=\"/static/85e5c4a3daef7f787f11230a2c3d798a/ff44c/gitalk_08.jpg 158w,\n/static/85e5c4a3daef7f787f11230a2c3d798a/a6688/gitalk_08.jpg 315w,\n/static/85e5c4a3daef7f787f11230a2c3d798a/828fb/gitalk_08.jpg 630w,\n/static/85e5c4a3daef7f787f11230a2c3d798a/a847c/gitalk_08.jpg 846w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n上の画像のように、アプリケーション名が自動で付与されている。</p>\n<p>これを元に再び gatsby-config.js を書き換える</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 他の設定</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-plugin-gitalk\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          clientID<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>生成したアプリケーションの<span class=\"token constant\">ID</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          clientSecret<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>生成したアプリケーションのsecretClient<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">//</span>\n          <span class=\"token comment\">// (略)</span>\n          <span class=\"token comment\">//</span>\n          proxy<span class=\"token operator\">:</span> <span class=\"token string\">\"https://[heroku上で見たアプリケーション名].herokuapp.com/https://github.com/login/oauth/access_token\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>heroku のアプリケーション名は「英単語-英単語-5 桁の数字」である。<br>\n例えば、「readable-code-02400」なら、<code class=\"language-text\">proxy:&quot;https://readable-code-02400.herokuapp.com/https://github.com/login/oauth/access_token&quot;</code>である。</p>\n<h3>ほんとうのおわり</h3>\n<p>これで全ての手順が完成した。成功した人はおめでとう。<br>\nできない人は僕より Gitalk の人に聞いた方が良いと思う。</p>","fields":{"slug":"/gatsby-gitalk/"},"frontmatter":{"title":"GitalkでGatsbyにコメント欄を導入","created":"2021-02-15T16:33","updated":"2021-02-22T20:55","description":"Githubのissueをコメント代わりに使う","tag":["gatsby","gitalk","github"],"author":["nozzle"],"category":"tech"}},"previous":{"fields":{"slug":"/noz20210215/"},"frontmatter":{"title":"日記"}},"next":{"fields":{"slug":"/gitclone-to-mygithub/"},"frontmatter":{"title":"gitで別のリポジトリからファイルをコピーする"}},"relatedPosts":{"totalCount":7,"edges":[{"node":{"fields":{"slug":"/gitalk-latest-display/"},"frontmatter":{"title":"gitalkの最新コメントをgatsbyに表示する"}}},{"node":{"fields":{"slug":"/gatsby-embed-link/"},"frontmatter":{"title":"gatsbyにyoutube,twitterのリンクを埋め込む"}}},{"node":{"fields":{"slug":"/gatsby-gitalk/"},"frontmatter":{"title":"GitalkでGatsbyにコメント欄を導入"}}},{"node":{"fields":{"slug":"/gatsby-markdown-image-decoration/"},"frontmatter":{"title":"gatsbyの特定のimgにCSSを適用"}}},{"node":{"fields":{"slug":"/gatsby-image/"},"frontmatter":{"title":"gatsbyのimageについて"}}},{"node":{"fields":{"slug":"/posh-git-settings/"},"frontmatter":{"title":"gitのブランチ名をPowerShellで表示する"}}},{"node":{"fields":{"slug":"/gatsby-environment-settings/"},"frontmatter":{"title":"gatsby環境設定"}}}]}},"pageContext":{"id":"12467c30-2f0e-5db5-88c3-ec6ea65115f4","previousPostId":"b53c0782-812d-5085-9cce-fd537b8469ec","nextPostId":"653a0d81-126e-5896-b401-38b41c4ab2ce","category":"tech","tagList":["gatsby","gitalk","github"]}},"staticQueryHashes":["3284037645","500847697"]}