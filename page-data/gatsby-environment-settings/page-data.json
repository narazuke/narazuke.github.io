{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-environment-settings/","result":{"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"3126d658-8d2e-5daa-be84-c2fbf984290c","excerpt":"Windows 編 nvm-win 導入 node がもう入ってるという人は読み飛ばしていい。 まず、nvm をインストールする。\nnode のバージョンを複数管理できて便利。 nvm-windows にアクセスして、をダウンロードする。\n2021/01/3…","html":"<h1>Windows 編</h1>\n<h2>nvm-win 導入</h2>\n<p>node がもう入ってるという人は読み飛ばしていい。<br>\nまず、nvm をインストールする。\nnode のバージョンを複数管理できて便利。<br>\n<a href=\"https://github.com/coreybutler/nvm-windows/releases\">nvm-windows</a> にアクセスして、<code class=\"language-text\">nvm-setup.zip</code>をダウンロードする。\n2021/01/31 時点での最新版は<code class=\"language-text\">1.1.7</code></p>\n<p><code class=\"language-text\">nvm-setup.exe</code>を起動して、ウィザードに従う。\n抱き合わせの怪しいソフトは無いので安心。</p>\n<p>Finished が出たらコマンドプロンプトか Powershell を開く。<br>\n<code class=\"language-text\">nvm version</code>と入力して自分がインストールした nvm のバージョンが出たら成功。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> nvm version           <span class=\"token comment\"># nvmのバージョン表示</span>\n1<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>7</code></pre></div>\n<h2>node をインストール</h2>\n<p><code class=\"language-text\">nvm list available</code>でインストールできる node を吟味しよう。<br>\n最新版だと gatsby が対応していない可能性もあるので、LTS にあるバージョンが盤石に思える。<br>\n選んだら、<code class=\"language-text\">nvm install x.y.z</code>でインストールする。<br>\n自分の環境では v14.5.0 をインストールした。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> nvm list available    <span class=\"token comment\"># インストール可能なnodeのversion表示</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> nvm install x<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">.</span>z     <span class=\"token comment\"># バージョンx.y.zをインストールする</span></code></pre></div>\n<p>終わったら<code class=\"language-text\">nvm use x.y.x</code>でバージョンを選択する。\n<code class=\"language-text\">node --version</code>で`x.y.z と表示されたら成功。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> nvm use x<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">.</span>z         <span class=\"token comment\"># nodeのバージョン選択</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> node <span class=\"token operator\">--</span>version        <span class=\"token comment\"># nodeのバージョンを表示</span>\nx<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">.</span>z</code></pre></div>\n<p>参考: <a href=\"https://laboradian.com/how-to-use-nvm/\">Node.js のバージョン管理ツール nvm の使い方</a></p>\n<h2>gatsby をインストール</h2>\n<h3>npm を用いたインストール</h3>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> npm install <span class=\"token operator\">-</span>g gatsby-<span class=\"token function\">cli</span>     <span class=\"token comment\"># gatsbyをインストール</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> npm install <span class=\"token operator\">-</span>g yarn     <span class=\"token comment\"># gatsbyをインストール</span></code></pre></div>\n<p>ちょっとここから、本筋とは無関係な npm に関する全般的な備忘録が続く。</p>\n<h3>npm とは？</h3>\n<p>ここらへんは自分も曖昧なので詳しい人の解説を見よう。</p>\n<blockquote>\n<p>Node.js のパッケージを管理するための CLI であり、パッケージを作成したり、NPM 上のパッケージをローカルにインストールしたり、自分のパッケージを NPM に公開したりと、Node.js の開発に欠かせないツールである。Node.js をインストールすると自動的に npm もインストールされる。</p>\n</blockquote>\n<p>引用元: <a href=\"https://qiita.com/righteous/items/e5448cb2e7e11ab7d477\">【初心者向け】NPM と package.json を概念的に理解する</a></p>\n<p><code class=\"language-text\">pip</code>が<a href=\"https://pypi.org\">pypi.org</a>で管理されてるのと同様に、<code class=\"language-text\">npm</code>は<a href=\"https://www.npmjs.com\">NPM</a>で管理されてると考えて良い。</p>\n<h3>npm のインストール先</h3>\n<h4>グローバルインストール</h4>\n<p><code class=\"language-text\">npm</code>のインストール時、<code class=\"language-text\">-g</code>オプションを付けるとグローバルインストールとなり、どのディレクトリからも使用可能なコマンドとなる。<br>\nグローバルインストールの場合、モジュールは<code class=\"language-text\">npm</code>と同じ階層のディレクトリにインストールされる。<br>\n<code class=\"language-text\">nvm-windows</code>で<code class=\"language-text\">node</code>を導入した方は、<code class=\"language-text\">C:\\Users\\[username]\\AppData\\Roaming\\nvm\\v14.5.0\\node_modules</code>を参照すれば、<code class=\"language-text\">gatsby-cli</code>ディレクトリが確認できるはず。</p>\n<h4>ローカルインストール</h4>\n<p><code class=\"language-text\">-g</code>を<strong>付けない</strong>と、カレントディレクトリの<code class=\"language-text\">node_modules</code>にインストールされる。</p>\n<h2>gatsby 構築環境を作る</h2>\n<p>サイトのフォルダを置く場所まで移動しよう。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> gatsby new <span class=\"token namespace\">[username]</span><span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>io https:<span class=\"token operator\">/</span><span class=\"token operator\">/</span>github<span class=\"token punctuation\">.</span>com/gatsbyjs/gatsby-starter-blog       <span class=\"token comment\"># gatsby謹製スターターキットをローカル環境に作る</span></code></pre></div>\n<p>[username]を自分の github のアカウント名にしておくと、Github Pages で連携できる。</p>\n<p>gatsby-starter-blog 以外にも素敵なスターターがたくさんある。</p>\n<p>なお、git が Windows に入ってない場合、このコマンドに失敗する。\n入れよう。<br>\n<a href=\"https://qiita.com/kamishi/items/5a3eed06c122f28fe2ea\">自宅 PC に Git for Windows をインストールする手順</a> という qiita の記事が分かりやすかった。</p>\n<h2>gatsby をローカル環境で動かす</h2>\n<p><code class=\"language-text\">gatsby develop</code>でサーバを起動</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> gatsby develop       <span class=\"token comment\"># ローカルのサーバ起動</span></code></pre></div>\n<p>ブラウザで<code class=\"language-text\">https://localhost:8000</code>にアクセスすると、スターターブログが公開されているはず。ひとまずおめでとう！\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ead913cb60bf5bf2adba997935ad9f70/6e9ba/blog_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 120.25316455696202%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACwElEQVQ4y51Vy07bQBTlE/kGFiCQWCIkIlZs+AJ+ASGxrboqq7ZIqFSFEpLm7Vf8Hr/t2I59qjvEVnAopLnS8YzH4+t775lzvQUAvV4PkiRhOp1ydLtdGIaBLMvw9PSEdrsN3/f52mAwgOu6YIzRqyjLkqOyLbpcXFyg1Wrh6OiIY29vD7u7u7i8vMT5+Tn29/dxeHiI09NTHB8f4+DgAFdXV9xBURSrDm9ubnB9fY1Op8OjpUiGwyGPNs9zRFEEy7IQxzHSNOXR0XoV4bJxh62TE+zs7ODs7Azb29v11z+yKt3ltLeaX6AaUYSbGPniEarjPjRxDJuxOj1FlqCpU9iWCce24DoMzLbALBOM2XyPTbBtqKrK36tT/vL5E+5vv/GaUQ3/9AdoTxkeJAu/ZIZHxUFHc9FRXfyUGLwwxixJEMUxkiRBGIa8trXDcoGiKFGUBCBfICtW8W7KzRo2tjTmL2iSsUKK6GcYuxmezQR9O0HHjOEk+ZtMvoeXlMsSXdXBb5nhh+yhz2Z40GOYcb4Zy3SZSgI0WQQzVHi2CdfUYGgqdF3nDBI0TeMjEUejaZp8jUD7qoPOSdF0HaIkYyIIECUJgihBFEWub0EQoCgKv6d5tS7Lcv2cdL4mKRum/KhHuFNCPOgRfqoRbuUAip++0uq/SFh2VrMsGxYEzYLhhQjTAv5sjqwoVzY3jTrNcreppSdMJhgNB5iMhug8tzHo9TAej3jHod44Go24guieQPe0XpEUBMFrh2EQwHUcOFyvNjzP402U1vi4aKikW0I1r5hdSTmZl4jzErM5kMxf62PdFlZHSNq9V0N8FQPcTSN8lwKE6XxtlTRr/HKwZQniZASX2bVu39q8jnGHvh/AcVw+FuUqu//jdOHQ51KipmloGsZWgLGXvvlX+9BhdZ7ol0mszfMcs3yOWV5s5PAvLnwp1GAWt1AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"blog\"\n        title=\"blog\"\n        src=\"/static/ead913cb60bf5bf2adba997935ad9f70/f058b/blog_01.png\"\n        srcset=\"/static/ead913cb60bf5bf2adba997935ad9f70/c26ae/blog_01.png 158w,\n/static/ead913cb60bf5bf2adba997935ad9f70/6bdcf/blog_01.png 315w,\n/static/ead913cb60bf5bf2adba997935ad9f70/f058b/blog_01.png 630w,\n/static/ead913cb60bf5bf2adba997935ad9f70/6e9ba/blog_01.png 731w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Github Pages を使って公開する</h2>\n<p><code class=\"language-text\">gh-pages</code>を導入して Deploy する</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> yarn add <span class=\"token operator\">--</span>dev gh-pages   <span class=\"token comment\"># package.jsonのdevDependenciesにgh-pagesをインストール</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> yarn run deploy           <span class=\"token comment\"># gh-pagesを使って[username].github.ioにdeploy</span></code></pre></div>\n<p>すると、Windows なら Github のアカウント認証のポップアップが出てくる。\nメールアドレスとパスワード、もしくはアクセストークンで認証する。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nPublished\nDone in xx<span class=\"token punctuation\">.</span>xxs<span class=\"token punctuation\">.</span></code></pre></div>\n<p>と表示されたら完了。</p>\n<p>[username].github.io にアクセスすると deploy したサイトが公開されている。\nおめでとう！</p>\n<h2>トラブルシュート: ERROR #11321 PLUGIN</h2>\n<h3>問題</h3>\n<p><code class=\"language-text\">yarn run deploy</code>する時に、エラーが吐かれることがある。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token string\">\"gatsby-plugin-manifest\"</span> threw an error <span class=\"token keyword\">while</span> running the onPostBootstrap lifecycle:</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b63ae617fc03403f8c08481c97a65b6/31aff/error_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.86075949367088%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACd0lEQVQ4y5VV207cMBTkR9ql2fh+iZM4mxtILYK2WxBVX/tYqU/w/69T+YQsm2UX6MPIluOMZ3SOx2e/TMQfM+K36TAag2AEtOUwJ+C8hHWC5mnUhoGLTxAyI5zVTYG2rxDbEm0fUUdPP4XSoAgJmuZlZWmsY4Gqdk9rDt6rJaHzCmVpdyTpVKVz5PkKOVuB8fMF0trheiJKpAlnxnBamD9WlUU/NChLB+vSt+fTT2Gh0BpOitKi1AyhMKS2rB2cF4vNxwheECYypXJwtoIKFq6xMOYjWU6KZyv7OEa6I/RBQ3kL6QOUD5DeE7QPsD7AuIQCxnkalZYnyaaiSIYoJGqCQBQCjZAwMgenTes3LS8Ir0KJx+YLHsZrPFze4G9zhceLLQZvkfEVhMj+z7LUGWLHEDuOEBmEZpCWQRmG1AGpcfVe4d5UKNUaVe0RmwCtGSmS72yRo4RKZ9i0DJs2Rz8ougnNJtCNSYdRF+ic5q+1y57CDFXNUVYMVZ2uk6drNlllUPq45VP2SeEwcnQ9Q9spNBuPtqupuRPJRDopfI99Imw2ArGRiA1DEdK8hC8UkVHKmJQ0U8JoM6XOK5bXlB4pdWZbh9ZO4aTlfsjRdgxtnyM2Gl3fYNOWsFY8FYXtrM94wzJHbDjqyFBHQy2UVGvDd5jtzuQnCbXJMF5wjCNHP3C0rUY/bIg0/UwE+rnis+J9wkXaCJUhlKkYDL5Yw/mcknoO2sMnYCqUWFR9GV8yg1LTptSDIdjd2+GcQLb+8CKpD8dFYtcuYBxabH/c4PbuG+5/3uL79hp391tcf/2Mro/U6On9iLF4mlt6a1JnJDdcnO8U/gOBqo5jK8gt4gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"error\"\n        title=\"error\"\n        src=\"/static/7b63ae617fc03403f8c08481c97a65b6/f058b/error_01.png\"\n        srcset=\"/static/7b63ae617fc03403f8c08481c97a65b6/c26ae/error_01.png 158w,\n/static/7b63ae617fc03403f8c08481c97a65b6/6bdcf/error_01.png 315w,\n/static/7b63ae617fc03403f8c08481c97a65b6/f058b/error_01.png 630w,\n/static/7b63ae617fc03403f8c08481c97a65b6/31aff/error_01.png 823w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>対処法</h3>\n<p><code class=\"language-text\">package-lock.json</code>と<code class=\"language-text\">node_modeles</code>の中身を全部消して、<code class=\"language-text\">npm install</code>する。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> <span class=\"token function\">rm</span> node_modules\n<span class=\"token function\">PS</span> C:¥Users¥hoge> <span class=\"token function\">rm</span> package-lock<span class=\"token punctuation\">.</span>json\n<span class=\"token function\">PS</span> C:¥Users¥hoge> npm install</code></pre></div>","fields":{"slug":"/gatsby-environment-settings/"},"frontmatter":{"title":"gatsby環境設定","created":"2021-01-31T14:52","updated":"2021-02-15T18:02","description":"WindowsでNodeとGatsbyを導入し、Github Pagesで公開するまでの備忘録です","tag":["gatsby","windows","node"],"author":["nozzle"],"category":"tech"}},"previous":{"fields":{"slug":"/git-memorandum/"},"frontmatter":{"title":"git備忘録"}},"next":{"fields":{"slug":"/narazuke-new-feature-candidates/"},"frontmatter":{"title":"NARADUKE新機能候補"}},"relatedPosts":{"totalCount":11,"edges":[{"node":{"fields":{"slug":"/gatsby-math/"},"frontmatter":{"title":"web 上 で tex の数学記法を使う"}}},{"node":{"fields":{"slug":"/zoom-shortcut/"},"frontmatter":{"title":"特定のzoomへのショートカットを作る"}}},{"node":{"fields":{"slug":"/self-access-restriction/"},"frontmatter":{"title":"hostsを弄らせて欲を断つ"}}},{"node":{"fields":{"slug":"/gitalk-latest-display/"},"frontmatter":{"title":"gitalkの最新コメントをgatsbyに表示する"}}},{"node":{"fields":{"slug":"/gatsby-embed-link/"},"frontmatter":{"title":"gatsbyにyoutube,twitterのリンクを埋め込む"}}},{"node":{"fields":{"slug":"/gatsby-gitalk/"},"frontmatter":{"title":"GitalkでGatsbyにコメント欄を導入"}}},{"node":{"fields":{"slug":"/gatsby-markdown-image-decoration/"},"frontmatter":{"title":"gatsbyの特定のimgにCSSを適用"}}},{"node":{"fields":{"slug":"/gatsby-image/"},"frontmatter":{"title":"gatsbyのimageについて"}}},{"node":{"fields":{"slug":"/trouble-shooting-EPERM-npm-install/"},"frontmatter":{"title":"トラブルシュート：npm installすると、\"Error EPERM operation not permitted, unlink ...\"が出る"}}},{"node":{"fields":{"slug":"/posh-git-settings/"},"frontmatter":{"title":"gitのブランチ名をPowerShellで表示する"}}},{"node":{"fields":{"slug":"/gatsby-environment-settings/"},"frontmatter":{"title":"gatsby環境設定"}}}]}},"pageContext":{"id":"3126d658-8d2e-5daa-be84-c2fbf984290c","previousPostId":"c9fa5d9d-5571-533e-b2c5-43980d338a88","nextPostId":"1201f93a-9bc1-5b58-bdbb-c0857bdad8c3","category":"tech","tagList":["gatsby","windows","node"]}},"staticQueryHashes":["3284037645","500847697"]}