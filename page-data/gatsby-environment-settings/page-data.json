{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-environment-settings/","result":{"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"fe6dacd9-39da-5a5c-8875-1fd75650657d","excerpt":"Windows 編 nvm-win 導入 node がもう入ってるという人は読み飛ばしていい。 まず、nvm をインストールする。\nnode のバージョンを複数管理できて便利。 nvm-windows にアクセスして、nvm-setup.zipをダウンロードする。\n2021/01/31 時点での最新版は1.1.…","html":"<h1>Windows 編</h1>\n<h2>nvm-win 導入</h2>\n<p>node がもう入ってるという人は読み飛ばしていい。<br>\nまず、nvm をインストールする。\nnode のバージョンを複数管理できて便利。<br>\n<a href=\"https://github.com/coreybutler/nvm-windows/releases\">nvm-windows</a> にアクセスして、<code>nvm-setup.zip</code>をダウンロードする。\n2021/01/31 時点での最新版は<code>1.1.7</code></p>\n<p><code>nvm-setup.exe</code>を起動して、ウィザードに従う。\n抱き合わせの怪しいソフトは無いので安心。</p>\n<p>Finished が出たらコマンドプロンプトか Powershell を開く。<br>\n<code>nvm version</code>と入力して自分がインストールした nvm のバージョンが出たら成功。</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> nvm version           # nvmのバージョン表示\n1.1.7\n</code></pre>\n<h2>node をインストール</h2>\n<p><code>nvm list available</code>でインストールできる node を吟味しよう。<br>\n最新版だと gatsby が対応していない可能性もあるので、LTS にあるバージョンが盤石に思える。<br>\n選んだら、<code>nvm install x.y.z</code>でインストールする。<br>\n自分の環境では v14.5.0 をインストールした。</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> nvm list available    # インストール可能なnodeのversion表示\nPS C:¥Users¥hoge> nvm install x.y.z     # バージョンx.y.zをインストールする\n</code></pre>\n<p>終わったら<code>nvm use x.y.x</code>でバージョンを選択する。\n<code>node --version</code>で`x.y.z と表示されたら成功。</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> nvm use x.y.z         # nodeのバージョン選択\nPS C:¥Users¥hoge> node --version        # nodeのバージョンを表示\nx.y.z\n</code></pre>\n<p>参考: <a href=\"https://laboradian.com/how-to-use-nvm/\">Node.js のバージョン管理ツール nvm の使い方</a></p>\n<h2>gatsby をインストール</h2>\n<h3>npm を用いたインストール</h3>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> npm install -g gatsby-cli     # gatsbyをインストール\nPS C:¥Users¥hoge> npm install -g yarn     # gatsbyをインストール\n</code></pre>\n<p>ちょっとここから、本筋とは無関係な npm に関する全般的な備忘録が続く。</p>\n<h3>npm とは？</h3>\n<p>ここらへんは自分も曖昧なので詳しい人の解説を見よう。</p>\n<blockquote>\n<p>Node.js のパッケージを管理するための CLI であり、パッケージを作成したり、NPM 上のパッケージをローカルにインストールしたり、自分のパッケージを NPM に公開したりと、Node.js の開発に欠かせないツールである。Node.js をインストールすると自動的に npm もインストールされる。</p>\n</blockquote>\n<p>引用元: <a href=\"https://qiita.com/righteous/items/e5448cb2e7e11ab7d477\">【初心者向け】NPM と package.json を概念的に理解する</a></p>\n<p><code>pip</code>が<a href=\"https://pypi.org\">pypi.org</a>で管理されてるのと同様に、<code>npm</code>は<a href=\"https://www.npmjs.com\">NPM</a>で管理されてると考えて良い。</p>\n<h3>npm のインストール先</h3>\n<h4>グローバルインストール</h4>\n<p><code>npm</code>のインストール時、<code>-g</code>オプションを付けるとグローバルインストールとなり、どのディレクトリからも使用可能なコマンドとなる。<br>\nグローバルインストールの場合、モジュールは<code>npm</code>と同じ階層のディレクトリにインストールされる。<br>\n<code>nvm-windows</code>で<code>node</code>を導入した方は、<code>C:\\Users\\[username]\\AppData\\Roaming\\nvm\\v14.5.0\\node_modules</code>を参照すれば、<code>gatsby-cli</code>ディレクトリが確認できるはず。</p>\n<h4>ローカルインストール</h4>\n<p><code>-g</code>を<strong>付けない</strong>と、カレントディレクトリの<code>node_modules</code>にインストールされる。</p>\n<h2>gatsby 構築環境を作る</h2>\n<p>サイトのフォルダを置く場所まで移動しよう。</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> gatsby new [username].github.io https://github.com/gatsbyjs/gatsby-starter-blog       # gatsby謹製スターターキットをローカル環境に作る\n</code></pre>\n<p>[username]を自分の github のアカウント名にしておくと、Github Pages で連携できる。</p>\n<p>gatsby-starter-blog 以外にも素敵なスターターがたくさんある。</p>\n<p>なお、git が Windows に入ってない場合、このコマンドに失敗する。\n入れよう。<br>\n<a href=\"https://qiita.com/kamishi/items/5a3eed06c122f28fe2ea\">自宅 PC に Git for Windows をインストールする手順</a> という qiita の記事が分かりやすかった。</p>\n<h2>gatsby をローカル環境で動かす</h2>\n<p><code>gatsby develop</code>でサーバを起動</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> gatsby develop       # ローカルのサーバ起動\n</code></pre>\n<p>ブラウザで<code>https://localhost:8000</code>にアクセスすると、スターターブログが公開されているはず。ひとまずおめでとう！\n<img src=\"./blog_01.png\" alt=\"blog\"></p>\n<h2>Github Pages を使って公開する</h2>\n<p><code>gh-pages</code>を導入して Deploy する</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> yarn add --dev gh-pages   # package.jsonのdevDependenciesにgh-pagesをインストール\nPS C:¥Users¥hoge> yarn run deploy           # gh-pagesを使って[username].github.ioにdeploy\n</code></pre>\n<p>すると、Windows なら Github のアカウント認証のポップアップが出てくる。\nメールアドレスとパスワード、もしくはアクセストークンで認証する。</p>\n<pre><code class=\"language-powershell\">...\nPublished\nDone in xx.xxs.\n</code></pre>\n<p>と表示されたら完了。</p>\n<p>[username].github.io にアクセスすると deploy したサイトが公開されている。\nおめでとう！</p>\n<h2>トラブルシュート: ERROR #11321 PLUGIN</h2>\n<h3>問題</h3>\n<p><code>yarn run deploy</code>する時に、エラーが吐かれることがある。</p>\n<pre><code class=\"language-powershell\">\"gatsby-plugin-manifest\" threw an error while running the onPostBootstrap lifecycle:\n</code></pre>\n<p><img src=\"./error_01.png\" alt=\"error\"></p>\n<h3>対処法</h3>\n<p><code>package-lock.json</code>と<code>node_modeles</code>の中身を全部消して、<code>npm install</code>する。</p>\n<pre><code class=\"language-powershell\">PS C:¥Users¥hoge> rm node_modules\nPS C:¥Users¥hoge> rm package-lock.json\nPS C:¥Users¥hoge> npm install\n</code></pre>","fields":{"slug":"/gatsby-environment-settings/"},"frontmatter":{"title":"gatsby環境設定","created":"2021-01-31T14:52","updated":"2021-02-15T18:02","description":"WindowsでNodeとGatsbyを導入し、Github Pagesで公開するまでの備忘録です","tag":["gatsby","windows","node"],"author":["nozzle"],"category":"tech"}},"previous":{"fields":{"slug":"/git-memorandum/"},"frontmatter":{"title":"git備忘録"}},"next":{"fields":{"slug":"/narazuke-new-feature-candidates/"},"frontmatter":{"title":"NARADUKE新機能候補"}},"relatedPosts":{"totalCount":10,"edges":[{"node":{"fields":{"slug":"/gatsby-math/"},"frontmatter":{"title":"web 上 で tex の数学記法を使う"}}},{"node":{"fields":{"slug":"/self-access-restriction/"},"frontmatter":{"title":"hostsを弄らせて欲を断つ"}}},{"node":{"fields":{"slug":"/gitalk-latest-display/"},"frontmatter":{"title":"gitalkの最新コメントをgatsbyに表示する"}}},{"node":{"fields":{"slug":"/gatsby-embed-link/"},"frontmatter":{"title":"gatsbyにyoutube,twitterのリンクを埋め込む"}}},{"node":{"fields":{"slug":"/gatsby-gitalk/"},"frontmatter":{"title":"GitalkでGatsbyにコメント欄を導入"}}},{"node":{"fields":{"slug":"/gatsby-markdown-image-decoration/"},"frontmatter":{"title":"gatsbyの特定のimgにCSSを適用"}}},{"node":{"fields":{"slug":"/gatsby-image/"},"frontmatter":{"title":"gatsbyのimageについて"}}},{"node":{"fields":{"slug":"/trouble-shooting-EPERM-npm-install/"},"frontmatter":{"title":"トラブルシュート：npm installすると、\"Error EPERM operation not permitted, unlink ...\"が出る"}}},{"node":{"fields":{"slug":"/posh-git-settings/"},"frontmatter":{"title":"gitのブランチ名をPowerShellで表示する"}}},{"node":{"fields":{"slug":"/gatsby-environment-settings/"},"frontmatter":{"title":"gatsby環境設定"}}}]}},"pageContext":{"id":"fe6dacd9-39da-5a5c-8875-1fd75650657d","previousPostId":"546b78b3-1abb-534d-a234-4c136cb30f4d","nextPostId":"cd6434e4-bb60-5810-894d-4466508d012f","category":"tech","tagList":["gatsby","windows","node"]}},"staticQueryHashes":["3284037645","500847697"]}